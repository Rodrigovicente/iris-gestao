<div class="header-background"></div>
<div class="content-wrapper">
	<div class="content">
		<header class="flex justify-between py-9">
			<h3 class="text-2xl font-bold">
				Fornecedores
				<span class="ml-2 text-sm text-slate-600">{{ totalSupplierCount }}</span>
			</h3>

			<div class="options">
				<span class="p-input-icon-left mx-2">
					<i class="pi pi-search"></i>
					<input
						pInputText
						class="white-theme"
						[(ngModel)]="filterText"
						(ngModelChange)="filterSuppliersDebounce($event)"
						type="text"
						placeholder="Buscar fornecedor"
					/>
				</span>

				<button
					pButton
					type="button"
					class="p-button-outlined h-9 white-theme"
					(click)="navigateTo('supplier/register/new')"
				>
					<i class="pi pi-plus mr-3"></i>
					Novo Fornecedor
				</button>
			</div>
		</header>
		<ng-container>
			<ng-container *ngIf="isLoadingSuppliers">
				<app-spinner styleClass="mt-11"></app-spinner>
			</ng-container>
			<ng-container *ngIf="!isLoadingSuppliers && noRestults">
				<div class="no-results-warn">
					<span>Nenhum resultado</span>
				</div>
			</ng-container>

			<p-table
				[value]="suppliersEntries"
				styleClass="p-datatable-striped"
				[tableStyle]="{ 'min-width': '50rem' }"
				[paginator]="!noRestults && !isLoadingSuppliers"
				[rows]="rows"
				[(first)]="first"
				responsiveLayout="scroll"
				[totalRecords]="totalSupplierCount"
				[lazy]="true"
				(onLazyLoad)="loadSuppliersPage($event)"
			>
				<ng-template pTemplate="header">
					<tr *ngIf="!isLoadingSuppliers && !noRestults">
						<th>Nome</th>
						<th>CPF/CNPJ</th>
						<th>Telefone</th>
						<th>Email</th>
						<th></th>
					</tr>
				</ng-template>
				<ng-template pTemplate="body" let-supplier>
					<tr>
						<td class="font-bold">{{ supplier.name }}</td>
						<td>{{ supplier.cpf_cnpj | cpfcnpj }}</td>
						<td> - </td>
                        <td> - </td>
						<td class="action w-40">
							<button
								pButton
								type="button"
								class="p-button-text h-7"
								(click)="navigateTo('supplier/details/' + supplier.guidReferencia)"
							>
								Ver detalhes
							</button>
						</td>
					</tr>
				</ng-template>
			</p-table>
		</ng-container>
	</div>
</div>