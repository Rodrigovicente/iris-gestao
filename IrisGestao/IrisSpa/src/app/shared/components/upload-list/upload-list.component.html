<div class="upload-list">
	<ng-container *ngFor="let attachment of attachments; index as i">
		<div class="attachment" [class.deleted]="deletedAttachments.has(i)">
			<span class="info">
				<span class="icon"><i class="ph ph-file-text"></i></span>
				<span class="name" [title]="attachment.fileName">{{
					attachment.fileName
				}}</span>
			</span>
			<span class="buttons">
				<ng-container *ngIf="!deletedAttachments.has(i); else undoDelete">
					<button
						pButton
						type="button"
						class="p-button-rounded p-button-text"
						(click)="downloadFile(attachment.fileLocation, attachment.fileName)"
					>
						<i class="ph-download-simple"></i>
					</button>
					<button
						pButton
						type="button"
						class="p-button-rounded p-button-text"
						(click)="removeAttachment(i)"
					>
						<i class="ph-trash"></i>
					</button>
				</ng-container>

				<ng-template #undoDelete>
					<button
						pButton
						type="button"
						class="p-button-rounded p-button-text"
						(click)="deletedAttachments.delete(i)"
					>
						<i class="ph-arrow-u-up-left"></i>
					</button>
				</ng-template>
			</span>
		</div>
	</ng-container>

	<div class="editing" *ngIf="editable">
		<button
			type="button"
			pButton
			(click)="openFileSelect()"
			[disabled]="deletedAttachments.size > 0"
		>
			Selecionar anexos
		</button>

		<button
			type="button"
			pButton
			(click)="deleteAttachments()"
			*ngIf="deletedAttachments.size > 0"
		>
			{{ isDeleting ? "..." : "Deletar anexos" }}
		</button>
	</div>
	<input type="file" (change)="addAttachment($event)" multiple #fileInput />
</div>
